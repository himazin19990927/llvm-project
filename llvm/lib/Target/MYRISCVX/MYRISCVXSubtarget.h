#ifndef LLVM_LIB_TARGET_MYRISCVX_MYRISCVXSUBTARGET_H
#define LLVM_LIB_TARGET_MYRISCVX_MYRISCVXSUBTARGET_H

#include "MYRISCVXFrameLowering.h"
#include "MYRISCVXISelLowering.h"
#include "MYRISCVXInstrInfo.h"
#include "llvm/CodeGen/SelectionDAGTargetInfo.h"
#include "llvm/CodeGen/TargetSubtargetInfo.h"
#include "llvm/IR/DataLayout.h"
#include "llvm/MC/MCInstrItineraries.h"
#include <string>

#define GET_SUBTARGETINFO_HEADER
#include "MYRISCVXGenSubtargetInfo.inc"

namespace llvm {
class StringRef;
class MYRISCVXTargetMachine;

class MYRISCVXSubtarget : public MYRISCVXGenSubtargetInfo {
  virtual void anchor();

protected:
  // FeatureRV64の設定はHasRV64メンバ変数で決定すると決めたので,
  // このメンバ変数を追加する必要がある
  bool HasRV64 = false;
  // @}MYRISCVXSubtarget_h_HasRV64
  MVT XLenVT = MVT::i32;

  // MYRISCVX architecture version
  InstrItineraryData InstrItins;

  const MYRISCVXTargetMachine &TM;

  Triple TargetTriple;

  const SelectionDAGTargetInfo TSInfo;

  MYRISCVXInstrInfo InstrInfo;
  MYRISCVXFrameLowering FrameLowering;
  MYRISCVXTargetLowering TLInfo;
  MYRISCVXRegisterInfo RegInfo;

public:
  MYRISCVXSubtarget(const Triple &TT, StringRef &CPU, StringRef &TuneCPU,
                    StringRef &FS, const MYRISCVXTargetMachine &_TM);

    /// - Virtual function, must have
    /// ParseSubtargetFeatures - Parses string setting specified
    /// subtarget options. Definition of function is auto generated by tblgen.
    void ParseSubtargetFeatures(StringRef CPU, StringRef TuneCPU, StringRef FS);

  MYRISCVXSubtarget &initializeSubtargetDependencies(StringRef CPU,
                                                     StringRef TuneCPU,
                                                     StringRef FS,
                                                     const TargetMachine &TM);
};
} // namespace llvm

#endif